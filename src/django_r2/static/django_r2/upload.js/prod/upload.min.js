(()=>{var K,w,ge,Ge,W,fe,ye,te,we,re,ne,oe,Qe,$={},be=[],Ze=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,_e=Array.isArray;function N(t,e){for(var n in e)t[n]=e[n];return t}function ae(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function f(t,e,n){var o,a,_,s={};for(_ in e)_=="key"?o=e[_]:_=="ref"?a=e[_]:s[_]=e[_];if(arguments.length>2&&(s.children=arguments.length>3?K.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)s[_]===void 0&&(s[_]=t.defaultProps[_]);return z(t,s,o,a,null)}function z(t,e,n,o,a){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:a??++ge,__i:-1,__u:0};return a==null&&w.vnode!=null&&w.vnode(_),_}function A(t){return t.children}function V(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function ke(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return ke(t)}}function he(t){(!t.__d&&(t.__d=!0)&&W.push(t)&&!J.__r++||fe!==w.debounceRendering)&&((fe=w.debounceRendering)||ye)(J)}function J(){var t,e,n,o,a,_,s,l;for(W.sort(te);t=W.shift();)t.__d&&(e=W.length,o=void 0,_=(a=(n=t).__v).__e,s=[],l=[],n.__P&&((o=N({},a)).__v=a.__v+1,w.vnode&&w.vnode(o),se(n.__P,o,a,n.__n,n.__P.namespaceURI,32&a.__u?[_]:null,s,_??I(a),!!(32&a.__u),l),o.__v=a.__v,o.__.__k[o.__i]=o,Se(s,o,l),o.__e!=_&&ke(o)),W.length>e&&W.sort(te));J.__r=0}function xe(t,e,n,o,a,_,s,l,u,i,h){var r,d,c,v,U,C,g=o&&o.__k||be,y=e.length;for(u=Ye(n,e,g,u,y),r=0;r<y;r++)(c=n.__k[r])!=null&&(d=c.__i===-1?$:g[c.__i]||$,c.__i=r,C=se(t,c,d,a,_,s,l,u,i,h),v=c.__e,c.ref&&d.ref!=c.ref&&(d.ref&&ie(d.ref,null,c),h.push(c.ref,c.__c||v,c)),U==null&&v!=null&&(U=v),4&c.__u||d.__k===c.__k?u=Ce(c,u,t):typeof c.type=="function"&&C!==void 0?u=C:v&&(u=v.nextSibling),c.__u&=-7);return n.__e=U,u}function Ye(t,e,n,o,a){var _,s,l,u,i,h=n.length,r=h,d=0;for(t.__k=new Array(a),_=0;_<a;_++)(s=e[_])!=null&&typeof s!="boolean"&&typeof s!="function"?(u=_+d,(s=t.__k[_]=typeof s=="string"||typeof s=="number"||typeof s=="bigint"||s.constructor==String?z(null,s,null,null,null):_e(s)?z(A,{children:s},null,null,null):s.constructor===void 0&&s.__b>0?z(s.type,s.props,s.key,s.ref?s.ref:null,s.__v):s).__=t,s.__b=t.__b+1,l=null,(i=s.__i=et(s,n,u,r))!==-1&&(r--,(l=n[i])&&(l.__u|=2)),l==null||l.__v===null?(i==-1&&d--,typeof s.type!="function"&&(s.__u|=4)):i!=u&&(i==u-1?d--:i==u+1?d++:(i>u?d--:d++,s.__u|=4))):t.__k[_]=null;if(r)for(_=0;_<h;_++)(l=n[_])!=null&&!(2&l.__u)&&(l.__e==o&&(o=I(l)),Ue(l,l));return o}function Ce(t,e,n){var o,a;if(typeof t.type=="function"){for(o=t.__k,a=0;o&&a<o.length;a++)o[a]&&(o[a].__=t,e=Ce(o[a],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function et(t,e,n,o){var a,_,s=t.key,l=t.type,u=e[n];if(u===null||u&&s==u.key&&l===u.type&&!(2&u.__u))return n;if(o>(u!=null&&!(2&u.__u)?1:0))for(a=n-1,_=n+1;a>=0||_<e.length;){if(a>=0){if((u=e[a])&&!(2&u.__u)&&s==u.key&&l===u.type)return a;a--}if(_<e.length){if((u=e[_])&&!(2&u.__u)&&s==u.key&&l===u.type)return _;_++}}return-1}function me(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Ze.test(e)?n:n+"px"}function q(t,e,n,o,a){var _;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||me(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||me(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")_=e!=(e=e.replace(we,"$1")),e=e.toLowerCase()in t||e=="onFocusOut"||e=="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=re,t.addEventListener(e,_?oe:ne,_)):t.removeEventListener(e,_?oe:ne,_);else{if(a=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ve(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=re++;else if(e.t<n.u)return;return n(w.event?w.event(e):e)}}}function se(t,e,n,o,a,_,s,l,u,i){var h,r,d,c,v,U,C,g,y,P,H,T,F,R,j,O,B,D=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[l=e.__e=n.__e]),(h=w.__b)&&h(e);e:if(typeof D=="function")try{if(g=e.props,y="prototype"in D&&D.prototype.render,P=(h=D.contextType)&&o[h.__c],H=h?P?P.props.value:h.__:o,n.__c?C=(r=e.__c=n.__c).__=r.__E:(y?e.__c=r=new D(g,H):(e.__c=r=new V(g,H),r.constructor=D,r.render=nt),P&&P.sub(r),r.props=g,r.state||(r.state={}),r.context=H,r.__n=o,d=r.__d=!0,r.__h=[],r._sb=[]),y&&r.__s==null&&(r.__s=r.state),y&&D.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=N({},r.__s)),N(r.__s,D.getDerivedStateFromProps(g,r.__s))),c=r.props,v=r.state,r.__v=e,d)y&&D.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),y&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(y&&D.getDerivedStateFromProps==null&&g!==c&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(g,H),!r.__e&&(r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(g,r.__s,H)===!1||e.__v==n.__v)){for(e.__v!=n.__v&&(r.props=g,r.state=r.__s,r.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(M){M&&(M.__=e)}),T=0;T<r._sb.length;T++)r.__h.push(r._sb[T]);r._sb=[],r.__h.length&&s.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(g,r.__s,H),y&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(c,v,U)})}if(r.context=H,r.props=g,r.__P=t,r.__e=!1,F=w.__r,R=0,y){for(r.state=r.__s,r.__d=!1,F&&F(e),h=r.render(r.props,r.state,r.context),j=0;j<r._sb.length;j++)r.__h.push(r._sb[j]);r._sb=[]}else do r.__d=!1,F&&F(e),h=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++R<25);r.state=r.__s,r.getChildContext!=null&&(o=N(N({},o),r.getChildContext())),y&&!d&&r.getSnapshotBeforeUpdate!=null&&(U=r.getSnapshotBeforeUpdate(c,v)),l=xe(t,_e(O=h!=null&&h.type===A&&h.key==null?h.props.children:h)?O:[O],e,n,o,a,_,s,l,u,i),r.base=e.__e,e.__u&=-161,r.__h.length&&s.push(r),C&&(r.__E=r.__=null)}catch(M){if(e.__v=null,u||_!=null)if(M.then){for(e.__u|=u?160:128;l&&l.nodeType==8&&l.nextSibling;)l=l.nextSibling;_[_.indexOf(l)]=null,e.__e=l}else for(B=_.length;B--;)ae(_[B]);else e.__e=n.__e,e.__k=n.__k;w.__e(M,e,n)}else _==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):l=e.__e=tt(n.__e,e,n,o,a,_,s,u,i);return(h=w.diffed)&&h(e),128&e.__u?void 0:l}function Se(t,e,n){for(var o=0;o<n.length;o++)ie(n[o],n[++o],n[++o]);w.__c&&w.__c(e,t),t.some(function(a){try{t=a.__h,a.__h=[],t.some(function(_){_.call(a)})}catch(_){w.__e(_,a.__v)}})}function tt(t,e,n,o,a,_,s,l,u){var i,h,r,d,c,v,U,C=n.props,g=e.props,y=e.type;if(y=="svg"?a="http://www.w3.org/2000/svg":y=="math"?a="http://www.w3.org/1998/Math/MathML":a||(a="http://www.w3.org/1999/xhtml"),_!=null){for(i=0;i<_.length;i++)if((c=_[i])&&"setAttribute"in c==!!y&&(y?c.localName==y:c.nodeType==3)){t=c,_[i]=null;break}}if(t==null){if(y==null)return document.createTextNode(g);t=document.createElementNS(a,y,g.is&&g),l&&(w.__m&&w.__m(e,_),l=!1),_=null}if(y===null)C===g||l&&t.data===g||(t.data=g);else{if(_=_&&K.call(t.childNodes),C=n.props||$,!l&&_!=null)for(C={},i=0;i<t.attributes.length;i++)C[(c=t.attributes[i]).name]=c.value;for(i in C)if(c=C[i],i!="children"){if(i=="dangerouslySetInnerHTML")r=c;else if(!(i in g)){if(i=="value"&&"defaultValue"in g||i=="checked"&&"defaultChecked"in g)continue;q(t,i,null,c,a)}}for(i in g)c=g[i],i=="children"?d=c:i=="dangerouslySetInnerHTML"?h=c:i=="value"?v=c:i=="checked"?U=c:l&&typeof c!="function"||C[i]===c||q(t,i,c,C[i],a);if(h)l||r&&(h.__html===r.__html||h.__html===t.innerHTML)||(t.innerHTML=h.__html),e.__k=[];else if(r&&(t.innerHTML=""),xe(t,_e(d)?d:[d],e,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":a,_,s,_?_[0]:n.__k&&I(n,0),l,u),_!=null)for(i=_.length;i--;)ae(_[i]);l||(i="value",y=="progress"&&v==null?t.removeAttribute("value"):v!==void 0&&(v!==t[i]||y=="progress"&&!v||y=="option"&&v!==C[i])&&q(t,i,v,C[i],a),i="checked",U!==void 0&&U!==t[i]&&q(t,i,U,C[i],a))}return t}function ie(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(a){w.__e(a,n)}}function Ue(t,e,n){var o,a;if(w.unmount&&w.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||ie(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){w.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(a=0;a<o.length;a++)o[a]&&Ue(o[a],e,n||typeof t.type!="function");n||ae(t.__e),t.__c=t.__=t.__e=void 0}function nt(t,e,n){return this.constructor(t,n)}function De(t,e,n){var o,a,_,s;e==document&&(e=document.documentElement),w.__&&w.__(t,e),a=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],s=[],se(e,t=(!o&&n||e).__k=f(A,null,[t]),a||$,$,e.namespaceURI,!o&&n?[n]:a?null:e.firstChild?K.call(e.childNodes):null,_,!o&&n?n:a?a.__e:e.firstChild,o,s),Se(_,t,s)}K=be.slice,w={__e:function(t,e,n,o){for(var a,_,s;e=e.__;)if((a=e.__c)&&!a.__)try{if((_=a.constructor)&&_.getDerivedStateFromError!=null&&(a.setState(_.getDerivedStateFromError(t)),s=a.__d),a.componentDidCatch!=null&&(a.componentDidCatch(t,o||{}),s=a.__d),s)return a.__E=a}catch(l){t=l}throw t}},ge=0,Ge=function(t){return t!=null&&t.constructor==null},V.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=N({},this.state),typeof t=="function"&&(t=t(N({},n),this.props)),t&&N(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),he(this))},V.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),he(this))},V.prototype.render=A,W=[],ye=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,te=function(t,e){return t.__v.__b-e.__v.__b},J.__r=0,we=/(PointerCapture)$|Capture$/i,re=0,ne=ve(!1),oe=ve(!0),Qe=0;var X,x,le,Ee,Q=0,Ne=[],S=w,He=S.__b,Le=S.__r,Me=S.diffed,Pe=S.__c,Te=S.unmount,Fe=S.__;function ce(t,e){S.__h&&S.__h(x,t,Q||e),Q=0;var n=x.__H||(x.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function E(t){return Q=1,ot(We,t)}function ot(t,e,n){var o=ce(X++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):We(void 0,e),function(l){var u=o.__N?o.__N[0]:o.__[0],i=o.t(u,l);u!==i&&(o.__N=[i,o.__[1]],o.__c.setState({}))}],o.__c=x,!x.u)){var a=function(l,u,i){if(!o.__c.__H)return!0;var h=o.__c.__H.__.filter(function(d){return!!d.__c});if(h.every(function(d){return!d.__N}))return!_||_.call(this,l,u,i);var r=o.__c.props!==l;return h.forEach(function(d){if(d.__N){var c=d.__[0];d.__=d.__N,d.__N=void 0,c!==d.__[0]&&(r=!0)}}),_&&_.call(this,l,u,i)||r};x.u=!0;var _=x.shouldComponentUpdate,s=x.componentWillUpdate;x.componentWillUpdate=function(l,u,i){if(this.__e){var h=_;_=void 0,a(l,u,i),_=h}s&&s.call(this,l,u,i)},x.shouldComponentUpdate=a}return o.__N||o.__}function Ae(t,e){var n=ce(X++,3);!S.__s&&Oe(n.__H,e)&&(n.__=t,n.i=e,x.__H.__h.push(n))}function Z(t){return Q=5,rt(function(){return{current:t}},[])}function rt(t,e){var n=ce(X++,7);return Oe(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function _t(){for(var t;t=Ne.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(G),t.__H.__h.forEach(ue),t.__H.__h=[]}catch(e){t.__H.__h=[],S.__e(e,t.__v)}}S.__b=function(t){x=null,He&&He(t)},S.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Fe&&Fe(t,e)},S.__r=function(t){Le&&Le(t),X=0;var e=(x=t.__c).__H;e&&(le===x?(e.__h=[],x.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(G),e.__h.forEach(ue),e.__h=[],X=0)),le=x},S.diffed=function(t){Me&&Me(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ne.push(e)!==1&&Ee===S.requestAnimationFrame||((Ee=S.requestAnimationFrame)||at)(_t)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),le=x=null},S.__c=function(t,e){e.some(function(n){try{n.__h.forEach(G),n.__h=n.__h.filter(function(o){return!o.__||ue(o)})}catch(o){e.some(function(a){a.__h&&(a.__h=[])}),e=[],S.__e(o,n.__v)}}),Pe&&Pe(t,e)},S.unmount=function(t){Te&&Te(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{G(o)}catch(a){e=a}}),n.__H=void 0,e&&S.__e(e,n.__v))};var Re=typeof requestAnimationFrame=="function";function at(t){var e,n=function(){clearTimeout(o),Re&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Re&&(e=requestAnimationFrame(n))}function G(t){var e=x,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),x=e}function ue(t){var e=x;t.__c=t.__(),x=e}function Oe(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function We(t,e){return typeof e=="function"?e(t):e}var de=()=>{let t=document.body.getAttribute("hx-headers");return JSON.parse(t)["X-CSRFToken"]},je=(t,e,n,o)=>{if(e===0)return"--:--:--";let a=(Date.now()-o)/1e3,_=e/a,s=(n-e)/_,l=Math.floor(s/3600),u=Math.floor(s%3600/60),i=Math.floor(s%60);return`${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},Y=t=>{if(t===0)return"0 B";let e=1024,n=["B","KB","MB","GB","TB"],o=Math.floor(Math.log(t)/Math.log(e));return`${(t/Math.pow(e,o)).toFixed(1)} ${n[o]}`};function Be(){let[t,e]=E({});return{uploadToS3:async(a,_,s)=>{let l=_.filename||a.name,u=new File([a],l,{type:a.type}),i=_.url;if(!i)throw new Error("Error with your request, please try again.");return new Promise((h,r)=>{let d=new XMLHttpRequest;d.open("PUT",i,!0),e(c=>({...c,[a.name]:d})),d.upload.onprogress=c=>{s?.(a,d,c,_)},d.onload=function(){e(c=>{let v={...c};return delete v[a.name],v}),d.status===200?h(_.object_data):r(new Error(d.statusText))},d.onerror=function(){e(c=>{let v={...c};return delete v[a.name],v}),r(new Error(`Upload failed: ${d.status}`))},d.setRequestHeader("Content-Type",u.type),d.send(u)})},cancelUpload:a=>{t[a]&&(t[a].abort(),e(_=>{let s={..._};return delete s[a],s}))},activeXHRs:t}}function Ie({fileName:t,progress:e,file:n,uploadStatus:o,completedFiles:a,timeEstimates:_,toggleUpload:s,cancelUpload:l}){return f("div",{className:"space-y-1"},f("div",{className:"flex justify-between items-center text-sm text-gray-600"},f("span",{className:"truncate flex-1"},t),f("div",{className:"flex items-center gap-4"},o==="uploading"&&!a.has(t)&&f(A,null,f("span",{className:"text-blue-500 whitespace-nowrap"},e.toFixed(1),"% \u2022 ",_," left"),f("span",{className:"text-gray-500 whitespace-nowrap"},Y(e*n.size/100)," / ",Y(n.size))),a.has(t)&&f(A,null,f("span",{className:"text-gray-500 whitespace-nowrap"},Y(n.size)),f("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"}))),!a.has(t)&&f(A,null,o==="uploading"&&f("button",{type:"button",onClick:()=>s(t),className:"text-yellow-500 hover:text-yellow-700"},f("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 9v6m4-6v6"}))),o==="paused"&&f("button",{type:"button",onClick:()=>s(t),className:"text-blue-500 hover:text-blue-700"},f("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M14 5l7 7m0 0l-7 7m7-7H3"}))),f("button",{type:"button",onClick:()=>l(t),className:"text-red-500 hover:text-red-700"},f("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},f("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})))))),o==="uploading"&&!a.has(t)&&f("div",{className:"w-full bg-gray-200 rounded-full h-2"},f("div",{className:"h-2 rounded-full transition-all duration-300 bg-blue-500",style:{width:`${e}%`}})))}var $e=t=>new Promise(e=>{if(t.type.startsWith("image/"))return st(t,e);if(t.type.startsWith("video/")||t.type.startsWith("audio/"))return it(t,e);e(null)}),st=(t,e)=>{let n=new Image;n.onload=()=>{let o={width:n.naturalWidth,height:n.naturalHeight,duration:null};window.URL.revokeObjectURL(n.src),e(o)},n.onerror=()=>{window.URL.revokeObjectURL(n.src),e(null)},n.src=window.URL.createObjectURL(t)},it=(t,e)=>{let n=t.type.startsWith("video/")?document.createElement("video"):document.createElement("audio");n.preload="metadata",n.onloadedmetadata=()=>{let o={duration:n.duration,width:n.videoWidth||null,height:n.videoHeight||null};window.URL.revokeObjectURL(n.src),e(o)},n.onerror=()=>{window.URL.revokeObjectURL(n.src),e(null)},n.src=window.URL.createObjectURL(t)};var Xe=()=>f("svg",{className:"w-5 h-5",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},f("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1z"}));function qe({callbackUrl:t,targetUrl:e}){let{uploadToS3:n,cancelUpload:o,activeXHRs:a}=Be(),[_,s]=E({}),[l,u]=E(!1),[i,h]=E([]),[r,d]=E(new Set),c=Z(null),[v,U]=E({}),[C,g]=E({}),[y,P]=E({}),H=10,[T,F]=E(0),R=Z([]),[j,O]=E(!1),B=Z(null),D=(p,m,b,k)=>{let L=b.loaded/b.total*100;s(ee=>({...ee,[p.name]:L})),v[p.name]==="uploading"&&g(ee=>({...ee,[p.name]:je(p,b.loaded,b.total,y[p.name])}))},M=async()=>{if(T>=H||R.current.length===0)return;let p=R.current.shift();F(m=>m+1);try{let m=await Ve(p),b=await n(p,m,D);await Je(b,p)}catch(m){console.error("Upload error:",m),U(b=>({...b,[p.name]:"error"}))}finally{F(m=>m-1),M()}};Ae(()=>{R.current.length>0&&T<H&&M()},[T]);let ze=async p=>{let m=Array.from(p.target.files);h(k=>[...k,...m]);let b={};m.forEach(k=>{b[k.name]=0,U(L=>({...L,[k.name]:"uploading"})),P(L=>({...L,[k.name]:Date.now()}))}),s(k=>({...k,...b})),p.target.value="",R.current.push(...m),M()},pe=p=>{p.preventDefault()},Ve=async p=>{let m=de(),b=new FormData;return b.append("filename",p.name),(await fetch(e,{method:"POST",body:b,headers:{"X-CSRFTOKEN":m}})).json()},Je=async(p,m)=>{d(L=>new Set([...L,m.name]));let b=await $e(m),k={object_data:p,file_data:{size:m.size,name:m.name,type:m.type,duration:b?.duration||null,width:b?.width||null,height:b?.height||null,lastModified:m.lastModified,lastModifiedDate:m.lastModifiedDate},completed:!0};fetch(t,{method:"POST",body:JSON.stringify(k),headers:{"X-CSRFTOKEN":de()}})},Ke=p=>{v[p]==="uploading"?(o(p),U(m=>({...m,[p]:"paused"})),g(m=>({...m,[p]:"--:--:--"}))):v[p]==="paused"&&(U(m=>({...m,[p]:"uploading"})),P(m=>({...m,[p]:Date.now()})),pe({preventDefault:()=>{}}))};return f("div",null,f("div",{ref:B,className:`mb-4 p-8 border-2 border-dashed rounded-lg transition-colors duration-200 ${j?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-blue-500"}`,onDragEnter:p=>{p.preventDefault(),p.stopPropagation(),O(!0)},onDragOver:p=>{p.preventDefault(),p.stopPropagation()},onDragLeave:p=>{p.preventDefault(),p.stopPropagation(),p.target===B.current&&O(!1)},onDrop:p=>{p.preventDefault(),p.stopPropagation(),O(!1);let m=Array.from(p.dataTransfer.files);if(m.length>0){let b={};m.forEach(k=>{b[k.name]=0,U(L=>({...L,[k.name]:"uploading"})),P(L=>({...L,[k.name]:Date.now()}))}),s(k=>({...k,...b})),h(k=>[...k,...m]),R.current.push(...m),M()}}},f("form",{className:"mb-4",onSubmit:pe},f("div",{className:"flex gap-2"},f("label",{htmlFor:"file-upload",className:"flex w-full items-center px-4 py-2 bg-white text-blue-500 rounded-lg shadow-lg tracking-wide uppercase border border-blue-500 cursor-pointer hover:bg-blue-500 hover:text-white transition-colors duration-300"},f("span",{className:"flex items-center gap-2"},f(Xe,null),"Select Files to Upload"),f("input",{ref:c,id:"file-upload",type:"file",name:"file",multiple:!0,className:"hidden",onChange:ze}))),f("input",{type:"hidden",name:"callback_url",value:t}),f("input",{type:"hidden",name:"target_url",value:e})),f("div",{className:"text-center text-gray-500 mt-2"},"or drag and drop files here")),f("div",{className:"space-y-3"},Object.entries(_).map(([p,m])=>{let b=i.find(k=>k.name===p);return f(Ie,{key:p,fileName:p,progress:m,file:b,uploadStatus:v[p],completedFiles:r,timeEstimates:C[p],toggleUpload:Ke,cancelUpload:o})})))}document.addEventListener("DOMContentLoaded",()=>{let t=document.querySelector("#django-r2-uploader");if(t){let e=t.dataset;De(f(qe,{...e}),t)}});})();
